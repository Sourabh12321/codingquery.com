<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ask Question</title>
  <link rel="shortcut icon" href="./image/orangelogo.png" />
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet" />
  <!----------------------------- navbar css --------------------------------->
  <link rel="stylesheet" href="./style/navBar.css" />
  <link rel="stylesheet" href="./style/query.css" />
  <link rel="stylesheet" href="./style/index.css" />
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <!----------------------------- navbar css --------------------------------->
</head>

<body>
  <div id="preloader">
    <i class="preloader-icon fa fa-spinner"></i>
    <!-- this is the preloader -->
  </div>

  <div id="navbar">
    <div id="hb">
      <img src="./image/hamburger.png" alt="">
      <div id="contents">
        <a href="./topQuestions.html"> <button>Top Question</button></a>
        <a href="./query.html"> <button>Query</button></a>
        <a href="./users.html"> <button>Users</button></a>
      </div>
    </div>

    <div id="lh">
      <!-- <img src="../image/hamburger.png" id="hanb" alt=""> -->

      <a href="../index.html"><img style="width: 130px;" src="./image/orangelogo.png" alt="logo"></a>
    </div>
    <div id="sec">
      <div id="navbtn">
        <a href="./topQuestions.html"> <button>TopQuestion</button></a>
        <a href="./query.html"> <button>Query</button></a>
        <a href="./users.html"> <button>Users</button></a>
      </div>
      <div>
        <input id="input" type="text" placeholder="Search Query ">
      </div>
    </div>

    <div id="ls">
      <!-- <a href="register.html">Sign up</a>
      <a href="login.html">Login</a> -->
      <button class="btn1"> <a href="register.html">Sign up</a> </button>
      <button class="btn1"> <a href="login.html"> Login</a></button>
    </div>

    <div id="Name">
      <p class="user">
        <p />
        <button id="logout">logout</button>
    </div>

  </div>

  <div id="ask">
    <h1>Ask a public question</h1>


    <div class="Good-Question">
      <h2 style="padding: 10px 0px;">Write a good question</h2>
      <p style="padding: 10px 0px 0px 0px;">You’re ready to <span style="color: #4ea5e3;">ask a programming-related
          question</span> and this form will help guide you through the process.</p>
      <p>Looking to ask a non-programming question? See <span style="color: #4e9ed7;">the topics here </span> to find a
        relevant site.</p>
      <p style="padding: 10px 0px;">Steps</p>
      <ul style="list-style-type: disc;" class="unordered">
        <li>Summarize your problem in a one-line title.</li>
        <li>Describe your problem in more detail.</li>
        <li>Describe what you tried and what you expected to happen.</li>
        <li>Add “tags” which help surface your question to members of the community.</li>
        <li>Review your question and post it to the site.</li>
      </ul>
    </div>


    <form action="">
      <div class="heading">
        <h3>Title</h3>
        <p>
          Be specific and imagine you’re asking a question to another person.
        </p>
        <input type="text" name="heading" id="heading"
          placeholder="e.g. Is there an R function for finding the index of an element in a vector?" required />
        <div id="question_body">
          <h3>What are the details of your problem?</h3>
          <p>
            Introduce the problem and expand on what you put in the title.
            Minimum 20 characters.
          </p>
          <div id="editor-container"></div>
        </div>
        <button id="submit">Post Your Question</button>
      </div>
    </form>
  </div>

  <div class="footer">
    <div id="pTag">
      <div>
        <h2>CODING EXCHANGE NETWORK</h2>
        <p>Technology</p>
        <p>Culture & receation</p>
        <p>Life & arts</p>
        <p>Science</p>
        <p>Professional</p>
        <p>Business</p>
        <p>API</p>
        <p>Data</p>
      </div>
      <div>
        <h2>COMPANY/h2>
          <p>About</p>
          <p>Press</p>
          <p>Cookie Setting</p>
          <p>Cookie Policy</p>
          <p>Contact Us</p>
          <p>Privacy Policy</p>
          <p>Terms of Service</p>
      </div>
      <div>
        <h2>PRODUCTS</h2>
        <p>ABOUT US</p>
        <p>ADVERTISE WITH US</p>
        <p>DEVELOPERS</p>
        <p>OUR BRANDS</p>
        <p>CARRIERS</p>
        <p>SOCIAL RESPONSIBILITY</p>
        <p>NEWS AND MEDIA</p>
        <p>INVESTORS</p>
        <p>CUSTOMER SERVICE</p>
        <p>SCHEDULE A SERVICE</p>

      </div>
      <div>


        <h2>CUSTOMER SERVICE</h2>
        <p>VISIT OUR SUPPORT CENTER</p>
        <p>CUSTOMER SERVICE</p>
        <p>SCHEDULE A SERVICE</p>
        <p>MANAGE AN APPOINTMENT</p>
        <p>Questions</p>
        <p>Help</p>
        <p>CONTACT US</p>

      </div>

    </div>


    <!-- ICONS -->

    <div id="icons"><img src="./image/facebook.png" alt=".\facebook.png">
      <!-- twitter  -->
      <img src="./image/twitter.png" alt="">
      <!-- instagram -->
      <img src="./image/instagram.png" alt="">

      <!-- pinterest -->
      <img src="./image/pinterest (1).png" alt="">
      <!-- youtube -->
      <img src="./image/youtube.png" alt="">
    </div>
  </div>
  <script>
    // Hide the preloader when the page is loaded
    window.addEventListener("load", () => {
      document.querySelector("body").classList.add("loaded");
    });
  </script>
  <!-- <script type="module" src="../script/navbar.js"></script> -->
  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
  <!-- <script type="module" src="../script/ask.js"></script> -->
  <script>
    var quill = new Quill("#editor-container", {
      modules: {
        toolbar: [
          [{ header: [1, 2, 3, 4, 5, 6, false] }],
          ["bold", "italic", "underline"],
          ["code-block"],
          [{ list: "ordered" }, { list: "bullet" }],
        ],
      },
      placeholder: "Explain Question in details...",
      theme: "snow",
    });

    let x = document.querySelector("form").addEventListener("submit", async (event) => {
      event.preventDefault();
      let question = document.getElementById("heading").value;
      // let innerhtml = quill.root.innerHTML;
      let description = quill.root.innerText;
      // console.log(question, description)

      let postObject = {
        title: question,
        description: description
      }

      let token = sessionStorage.getItem("token")

      if (token) {
        document.getElementById("ls").style.display = "none"
        document.querySelector(".user").innerText = "Hi!!" + " " + sessionStorage.getItem("Name");
      } else {
        document.querySelector("#Name").style.display = "none"
      }


      if (token) {
        let postTheNewQuestion = await fetch("https://poised-shorts-toad.cyclic.app/question/addquestion", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            authorization: token,
          },
          body: JSON.stringify(postObject)
        })
        // console.log(postTheNewQuestion)
        let data = await postTheNewQuestion.json();
        // console.log(data)
        if (data) {
          console.log(true);
        } else {
          console.log(false);
        }
      } else {
        swal({
          title: "you have to login first",
          icon: "warning",
        });

        setTimeout(() => {
          window.location.href = "login.html"
        }, 2000)

      }

    })
    let token = sessionStorage.getItem("token")

    let logout = document.querySelector("#logout").addEventListener("click", () => {
      sessionStorage.clear();
      window.location.href = "../index.html"
    })

    if (token) {
      document.getElementById("ls").style.display = "none"
      document.querySelector(".user").innerText = "Hi!!" + " " + sessionStorage.getItem("Name");
    } else {
      document.querySelector("#Name").style.display = "none"
    }
  </script>
</body>

</html>