<!DOCTYPE html>
<html lang="en">
        </div>
      </div>
    </div>
    <div class="topQuestion">
      <div class="top-section">
        <h1>Top Questions</h1>
        <button class="button">Ask Question</button>
      </div>

      <div class="second-top">
        <p class="filterby">Intresting</p>
        <p class="filterby">Bountied</p>
        <p class="filterby">Hot</p>
        <p class="filterby">Week</p>
        <p class="filterby">Month</p>
      </div>
      <hr style="margin-top: 90px;">
      <div class="third-section">
        <div class="details">
          <div class="votes">0
            votes</div>
          <div class="answers">0 answers</div>
          <div class="views">20
            views</div>
        </div>
    </div>


    <!-- <div id="FOOTER"> -->
    <!-- footer here copy this div -->
    <!-- </div> -->

    <script>
      document.querySelector("body").classList.add("loaded");
      // Hide the preloader when the page is loaded
      // window.addEventListener("load", () => {

      // });
      document.querySelector(".chat-form-container").addEventListener("click", (e) => {
        window.stop();
        e.preventDefault();
      })
      function openForm() {
        document.getElementById("myForm").style.display = "block";
      }

      function closeForm() {
        document.getElementById("myForm").style.display = "none";
      }
      const socket = io("http://localhost:2000", { transports: ["websocket"] });

      const chatmessage = document.getElementById("msg");
      const chatmessages = document.querySelector(".chat-messages");
      const user_name = document.querySelector(".btn");
      const btn = document.querySelector(".btn-icon");



      const url = new URLSearchParams(window.location.search);
      // const username = url.get("username");
      // const room = url.get("room")
      const username = "sourabh";
      const room = "javaScript";

      console.log(username, room);
      user_name.innerText = username;

      socket.emit("joinroom", { username, room });

      socket.emit("msg", "one user in connected");

      socket.on("msg", (message) => {
        console.log("hello");
        console.log(message);
        outputmsg(message);
        chatmessages.scrollTop = chatmessages.scrollHeight;
      })
      btn.addEventListener("click", (e) => {
        e.preventDefault();
        console.log("hello ")
        const msg = chatmessage.value;
        socket.emit("chatmessage", msg);
        console.log(msg);
      })

      // chatForm.addEventListener("submit", (e) => {
      //   e.preventDefault();
      //   console.log("hello ")
      //   const msg = e.target.elements.msg.value;
      //   socket.emit("chatmessage", msg);
      //   console.log(msg);

      // })

      function outputmsg(message) {
        let div = document.createElement("div");
        div.classList.add("message");

        let p = document.createElement("p");
        p.classList.add("meta");

        p.innerText = message.username;
        p.innerHTML += `<span>${message.time}</span>`;


        div.appendChild(p);

        const para = document.createElement("p");

        para.classList.add("text");
        para.innerText = message.text;

        div.appendChild(para);
        chatmessages.appendChild(div);
      }
    </script>
</body>

</html>

<script src="../scripts/topQuestion.js"></script>
